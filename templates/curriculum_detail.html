{% extends 'base.html' %}
{% load static %}

{% block title %}{{ curriculum.name }} - School Search{% endblock %}

{% block content %}
<div class="page-container">
    <div class="mb-4" style="margin-bottom: var(--space-5);">
        <a href="{% url 'curriculum_search' %}" class="btn btn-secondary"
            style="display: inline-flex; align-items: center; gap: var(--space-2); padding: 10px 20px; font-size: 14px;">
            <span class="material-icons" style="font-size: 18px;">arrow_back</span> Back to Curricula
        </a>
    </div>

    <!-- Main Curriculum Info Card -->
    <div class="card" style="padding: 0; overflow: hidden; margin-bottom: var(--space-6);">
        <div style="padding: var(--space-6); border-bottom: 1px solid var(--border-light); position: relative;">
            <div style="display: flex; align-items: flex-start; gap: var(--space-5); flex-wrap: wrap;">
                <div style="flex: 1; min-width: 250px;">
                    <h1 style="margin-bottom: var(--space-2); font-size: 36px; color: var(--text-primary);">{{ curriculum.name }}</h1>
                    {% if curriculum.abbreviation %}
                    <span style="display: inline-block; padding: 6px 16px; background: var(--bg-tertiary); border-radius: var(--radius-pill); font-weight: 600; font-size: 16px; color: var(--text-primary); margin-bottom: var(--space-4); border: 1px solid var(--border-light);">
                        {{ curriculum.abbreviation }}
                    </span>
                    {% endif %}
                </div>
                {% if curriculum.website %}
                <a href="{{ curriculum.website }}" target="_blank" class="btn btn-primary" style="align-self: flex-start;">
                    <span class="material-icons">language</span>
                    Official Website
                </a>
                {% endif %}
            </div>
        </div>

        <div style="padding: var(--space-6);">
            <!-- Summary Section -->
            {% if curriculum.description %}
            <div style="margin-bottom: var(--space-6);">
                <h2 style="margin-bottom: var(--space-4); font-size: 24px; color: var(--text-primary);">Summary</h2>
                <div style="padding: var(--space-5); background: var(--bg-tertiary); border-radius: var(--radius-lg); border: 1px solid var(--border-light);">
                    <p style="font-size: 16px; line-height: 1.8; color: var(--text-secondary); margin: 0;">{{ curriculum.description }}</p>
                </div>
            </div>
            {% endif %}

            <!-- Full Details Section -->
            <div style="margin-bottom: var(--space-6);">
                <h2 style="margin-bottom: var(--space-4); font-size: 24px; color: var(--text-primary);">Full Details</h2>
                
                <div class="grid-2" style="gap: var(--space-5); margin-bottom: var(--space-5);">
                    <!-- Subjects -->
                    <div class="card" style="padding: var(--space-5); border: 1px solid var(--border-light);">
                        <h3 style="margin-bottom: var(--space-4); display: flex; align-items: center; gap: var(--space-2); font-size: 18px;">
                            <span class="material-icons" style="color: var(--text-primary); font-size: 20px;">menu_book</span>
                            Subjects
                        </h3>
                        <div style="display: flex; flex-wrap: wrap; gap: var(--space-2);">
                            {% for subject in curriculum.get_subjects_list %}
                            <span style="padding: 8px 16px; background: var(--bg-tertiary); border-radius: var(--radius-pill); font-size: 14px; font-weight: 500; color: var(--text-primary); border: 1px solid var(--border-light);">
                                {{ subject }}
                            </span>
                            {% endfor %}
                        </div>
                    </div>

                    <!-- Exams -->
                    {% if curriculum.exams %}
                    <div class="card" style="padding: var(--space-5); border: 1px solid var(--border-light);">
                        <h3 style="margin-bottom: var(--space-4); display: flex; align-items: center; gap: var(--space-2); font-size: 18px;">
                            <span class="material-icons" style="color: var(--text-primary); font-size: 20px;">assignment</span>
                            Examinations
                        </h3>
                        <p style="font-size: 15px; line-height: 1.7; color: var(--text-secondary); margin: 0;">{{ curriculum.exams }}</p>
                    </div>
                    {% endif %}
                </div>

                {% if curriculum.info %}
                <div style="padding: var(--space-5); background: var(--bg-secondary); border-radius: var(--radius-lg); border: 1px solid var(--border-light);">
                    <h3 style="margin-bottom: var(--space-3); display: flex; align-items: center; gap: var(--space-2); font-size: 18px;">
                        <span class="material-icons" style="color: var(--text-primary); font-size: 20px;">info</span>
                        Additional Information
                    </h3>
                    <p style="font-size: 15px; line-height: 1.7; color: var(--text-secondary); margin: 0;">{{ curriculum.info }}</p>
                </div>
                {% endif %}
            </div>
        </div>
    </div>

    <!-- Wikipedia Data Section - Markdown Style -->
    {% if wikipedia_data %}
    <div class="card" style="padding: var(--space-6); margin-bottom: var(--space-6); border: 1px solid var(--border-light);">
        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: var(--space-6); flex-wrap: wrap; gap: var(--space-3); padding-bottom: var(--space-4); border-bottom: 1px solid var(--border-light);">
            <div style="display: flex; align-items: center; gap: var(--space-3);">
                <span class="material-icons" style="font-size: 32px; color: var(--text-primary);">public</span>
                <div>
                    <h2 style="margin: 0; font-size: 24px; font-weight: 600;">{{ wikipedia_data.title }}</h2>
                    <p style="margin: 0; color: var(--text-secondary); font-size: 14px;">From Wikipedia, the free encyclopedia</p>
                </div>
            </div>
            <a href="{{ wikipedia_data.page_url }}" target="_blank" class="btn btn-secondary" style="padding: 10px 20px;">
                <span class="material-icons">open_in_new</span>
                View on Wikipedia
            </a>
        </div>

        <!-- Wikipedia Content - Markdown Style -->
        {% if wikipedia_data.summary %}
        <div style="margin-bottom: var(--space-6);">
            <div style="font-size: 16px; line-height: 1.8; color: var(--text-secondary);">
                {{ wikipedia_data.summary }}
            </div>
        </div>
        {% endif %}

        {% if wikipedia_data.content %}
        <div style="border-top: 1px solid var(--border-light); padding-top: var(--space-6);">
            <div style="font-size: 15px; line-height: 1.8; color: var(--text-secondary); white-space: pre-wrap; font-family: var(--font-family);">
                {{ wikipedia_data.content }}
            </div>
        </div>
        {% endif %}
    </div>
    {% else %}
    <!-- No Wikipedia Data Available -->
    <div class="card" style="padding: var(--space-6); margin-bottom: var(--space-6); background: var(--bg-secondary); border: 1px solid var(--border-light);">
        <div style="text-align: center; padding: var(--space-6);">
            <span class="material-icons" style="font-size: 48px; color: var(--text-tertiary); margin-bottom: var(--space-3); display: block; opacity: 0.5;">public</span>
            <p style="color: var(--text-secondary); margin: 0;">Wikipedia information is not available for this curriculum at the moment.</p>
        </div>
    </div>
    {% endif %}
</div>

{% endblock %}
